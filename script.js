let tenThousandPixelString = "8473438068851221947780405347655574335368523542165391974854716406505179444939204922540793412178714644479983927903641687546096416768959223105472033045472400630786759147224091861162726043193499751690053383166192614338995173611043418721121979280790533842798868481760929580077485656156012564549102060983493937656522037302119872049558019164701757159065832681355151750295186278720468954915771088501518503145257792653053503277840978697951572382408805937293929532262090017742490077550772236013375043336281147175508599355930830175533024530381874671895772359864728555486156300556080276595742811357368840803004588010180991879498699530671824360341808277587086031094510226349044037553037140140633903850105754608604873024793445422295875202317265173500030294606512289209895068838585150905024976945546438091617966101391569072794416906550732119815547037211625393024416521393695126922087044586538319173093931069890376250905582242939569305600906016694227870894341803612713367453475924907780273209325838496432513757811984111869324378078493614494372610814203039580930264263666857688989234822652342195359424068710550151605254180707996716358573370406562943786064413674696091913112494152064611114154254553329710196086852030157154307429724431429223138244323034525350848961472329697310987244950408446144767025348163745458122676825936990964736871889769455051304094693743520197616414741284393660852030778555693251721006696541497336864484235208667522738652488623510081086003149031898050640659220562430140608372233473896511222026041849998379885975160648610164263446648630676288890255979320980170659930180029158126762865536834718402403716107505063373520420700599796792998634023532398695327430098167732635226890020210728103943198080954716795945015562085176619285427837242118552539025392018730935651801057008692582444761249235970580493632964083231409765424329002155422041987840808024299508656421414178804447887637524516636667382793996818047688121695190129926146205024167680096950030684423120312591156973969307279537426919395037951781710978897037430973448946238249777224177311893526252903499477035308841518650430755954308723871168676435967723251852365892388419648281097871376885766641830409091665210267093462817556149005298481637156670181765021570818296230400399292382790005972483364481990049854656597619994683223769164335448937960389949548511647030844611815087851932956718771487197035822429811232038157968658840825347100905757182586323021637077492461804561234669674584024739890965649144624201295763526850253070393414436237528129587631955634531577675576459082914373204664924489795912129056424533005646934036446928733962402755824944801080960348744049243657630377874993552274426573955769867612839941329449485642915715496907841308699502772356207956073702244483548865500058447339672351859605899146272030251800087248053270295264276773347828340948763762733194130326566719269027851262532888795922077077777069984128979476690037263675996780129955407197855727944960883899533338333565707519857697122623223350237621348779320831529824900108932430010061730477372992399414513598828682827760207152567023018927993074078870055845761350794652551342387267617300111034479659708087763351746693411985172174890724593499195933059959173380820431608549378375687241085288200579319805583881795071876319582199618454460733807167140065134238290221354460539347883897625534249306986423259813914265411209944418215642255581683924865158063745787454450709786853371359411896859714279186113692024361096403966932032747652983768614218392513458110439441590296176413971058168700429389132634712552704193570316468745365717661621631291382058912075049995856090768375094388043317927521415748949078562046610354345163170905084610647227566268065249139722401581638822509578595837331964011596542466018399671416992985847210995059445598583012232029164081081165642052065122088935886414640996424978700154223544889338830710493594359081901599134591696598397179589233061227166141663171580277701377016740051721644317706111514759067056447483757972711712068794073706495873218198668523898379059240214410737898985630881555877270528898460039892939765245612968991337834061064533006538636317133998740572669302462140747041263608477169042094706772869634375809338362719932921062798315778490186017330561269537220244156628648884613561854450155926675158411802878632249855715663100345184205462236292147554032321812264485659961764098988203675168578029398034131984040102380232281018390767240940753811380713159146696785364066288187441945958211821489841205912799090522778990068597484766191215348277745538697020937360401907757499155137028731222907704756334294456295856491415974985012360397776142419434418635642175752330309860959693549817930866458271883504581043438048962297343095300761081944779284834638725812868577416066605070413905427011557118512705049809765180825521610050956089938695859482701770418663639200228195913393555581598119492797314614492101406572709089444283115022109474657486613051958746775010506172168639935549111450737550247922096112054364844715952474524414537959523580591645863060137419294599594154934639255272552147871874332293264431627249687265605780416015657129612071170902014865615501767716394512633322620605504634874612194267380891230552271607676901096004630112427477258161340717084759114130722182993148370013391297253557618001995627540482704815445123690744515273004267009997944625364382400365951962079881457265281010469352473236246935995852199858625702288602644723730195586308828852125415294895266940640401150833094782927462552684253933292080476171675699339701362129096001598396185590273963655251720230342207749795674261472344266096864379966591633753257632447818846355342944906616590044930716521362526289407566280463485130549336725406543555829509283871638210123583206652056124698217067065778811872062934765104552879488211542029107631401924462972143465352597750314146106612316623068687029705169565552397377888365042882879227385788236284031783699030772165950725018697694057230083503862812708160241132098291201129324141906291032398460336178995472811726807587955721029105524557040204842241643921239261260855689641057139749965833002849944551217439092704504313476512109371675907403763502967236698338738489557305552220976411837085531779813575313430628853497600709151317838193140081560544721325498451991946121077826128205104523881623377759530981327994556414842148412044960745898183548789699626773191380684901157971009754878267740553694138893840189217251387775301693156249974620122128587212182917109439179904614319909658957206022458278267981546591723173137513392096627761938707729497292442712599735797641041635391922778233230315286348043212758542507042735762313682249568742601597541250468038651988650537339886366034811712752812257667809349441901936658557396739447680982178779992078983734317130874512924129696984381025331030676200239600782396988048518933691349713906943837914729755136156809098723017793347770397096972510400023755581203238115779171434608540265641632943269841321133410987598264604762603717455098184648166470527350312112331901244397572095695130027091611690106259571514582276929125694055556727897080043821418209233674699828955002655778289840304500463547422240118695967157634898911010934334212621511591144281152257644857092471643065454722740205666260035716712944041114662082948388548502316308090189705919044336655069833820623348450656568996813673588973310947356200728703219609682985546337111412898227540900658735789014025719874678316577375795120308305608494492480168038955322185712193390107328676721264444578488282053572498259050484986978658232332801663905729992936346768258137767219505100464391967530061053886268416651534028621324347146237616634503887459270474322314921786144132516221548943853833284413013079167647430471333410281705952588986303086081583864123650558644943973904237883518928351104000004665708933129263736593330463097339985320785033493421777426542789070279187971772330022552075174904828102200753747629605112901966360575159747120388568432983730209382702847062700478415267474261438550364254764488307723277992814719520059669949231286800511573516765830081598016730980723344550240681582995999230629691881461207033196378492373919426016317680159342965605694287113006702966686825269099483970400782456160488678284110617940193509351643897251399504894336742183624748189230011860717590906731753870392387715204158775430771055751436381774629350260764044597568833359727898461111041819457364394545196443467252624738240303314681156137275693282523239569188009749887165778364534029226802502034710243309197943670594400093131713153093385824189477228644429781653481081371356142449881486503329569264465085933060623770786772945631855366625952204842054237047105409602895563910739466489466300977567871585453656393976387347180568035945251841109466339952524853166028173803453224377550091727988564111079766668224524612584275589074930079569156681335544474601270587621828094483909671670651326432194771020676498557270098452526787739482864959848213287573438999229556122523620519008636904969901178777217353146796015321090801277560437977414323662885900497185110992664468166387769484587198330724518837774603615246084388033336321940266825896578066234727842389620495909208175261998365064977015264548712548220079487679679181564479585238173776346807237205431950547786143282615347873762368536470226871956608557187835481383693057408602206652051484151525212883630416628137055126863025722953369121798287897196864385690352191267111311707981426622462843705666934664679719852538459437587156113688187870405231901676612227540547950813635446112174191324856913465412452273159427962323726176699047464391614188745277948251039695210515445231459604651504357186747802225723360078582440569835513262588395295771784306506270772543683674124023044982764016789991436757551569161186083250158014103664905190488879416614293352849254062992379996540799568697388767350332454618570082625781582962168537289738125374696364576043619190935606169055887048927467848499666145706842553071064509842546862894683211463986710609489244748354315640231274093304648205002118040065004156038391781397170437088710104381816226758595908726989253770099283056990510092";

const colorMap = {
  "0": "#FFFFFF", // white
  "1": "#00FF00", // green
  "2": "#FFFF00", // yellow
  "3": "#FF0000", // red
  "4": "#FFA500", // orange
  "5": "#800080", // purple
  "6": "#0000FF", // blue
  "7": "#008080", // teal
  "8": "#FFC0CB", // pink
  "9": "#000000", // black
};

window.onload = () => {
  const canvas = document.getElementById("canvas");
  const context = canvas.getContext("2d");
  
  const gridSize = Math.sqrt(tenThousandPixelString.length);
  let pixelSize = 3;
  let offsetX = 0;
  let offsetY = 0;
  let isDragging = false;
  let lastX, lastY;

  const redraw = () => {
    canvas.width = 300;
    canvas.height = 300;
    
    context.clearRect(0, 0, canvas.width, canvas.height);
    
    for (let i = 0; i < tenThousandPixelString.length; i++) {
      const x = ((i % gridSize) * pixelSize) - offsetX;
      const y = (Math.floor(i / gridSize) * pixelSize) - offsetY;
      const color = colorMap[tenThousandPixelString[i]];
      
      context.fillStyle = color;
      context.fillRect(x, y, pixelSize, pixelSize);
    }
  }
  
  const applyOffsetLimits = () => {
    const maxOffset = (gridSize * pixelSize) - canvas.width;
    offsetX = Math.min(maxOffset, Math.max(0, offsetX));
    offsetY = Math.min(maxOffset, Math.max(0, offsetY));
  }

  const zoom = (factor, cursorX, cursorY) => {
    const oldPixelSize = pixelSize;
    pixelSize *= factor;
    pixelSize = Math.max(3, Math.min(30, pixelSize));

    offsetX = (offsetX + cursorX) * (pixelSize / oldPixelSize) - cursorX;
    offsetY = (offsetY + cursorY) * (pixelSize / oldPixelSize) - cursorY;
    
    applyOffsetLimits();

    redraw();
  }

  canvas.addEventListener('wheel', (e) => {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const cursorX = e.clientX - rect.left;
    const cursorY = e.clientY - rect.top;
    const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
    zoom(zoomFactor, cursorX, cursorY);
  });

  canvas.addEventListener('mousedown', (e) => {
    isDragging = true;
    lastX = e.clientX;
    lastY = e.clientY;
  });

  canvas.addEventListener('mousemove', (e) => {
    if (isDragging) {
      const deltaX = e.clientX - lastX;
      const deltaY = e.clientY - lastY;

      offsetX -= deltaX;
      offsetY -= deltaY;
      
      applyOffsetLimits();

      lastX = e.clientX;
      lastY = e.clientY;
      redraw();
    }
  });

  canvas.addEventListener('mouseup', () => {
    isDragging = false;
  });

  canvas.addEventListener('mouseleave', () => {
    isDragging = false;
  });

  redraw();
}